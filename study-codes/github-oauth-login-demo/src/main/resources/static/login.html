<!DOCTYPE html>
<html lang="zh">
<head>
    <link href="./res/icon/favicon.ico" rel="icon" type="image/x-icon"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <title>GitHub OAuth登录</title>
    <script src="./res/vue.min.js"></script>
    <script src="./res/axios.min.js"></script>
    <script src="./res/elemeIndex.js"></script>
    <script src="./res/qs.min.js" type="text/javascript"></script>
    <script src="./res/common.js"></script>
    <link href="./res/elemeIndex.css" rel="stylesheet">
</head>
<body>
<div id="divApp" style="text-align: center;">
    <pre>
        官方登录说明：https://docs.github.com/zh/apps/creating-github-apps/writing-code-for-a-github-app/building-a-login-with-github-button-with-a-github-app
    </pre>
    <input type="button" onclick="doLogin()" value="Github登录">

    <!-- github只能跳转页面，不支持通过iframe来访问 -->
    <!--    <el-dialog title="Github登录" :visible.sync="dialogVisible"-->
    <!--               width="30%" :before-close="handleClose">-->
    <!--        <iframe :src="loginUrl" frameborder="0" style="width:100%;height:600px"-->
    <!--                allow="clipboard-read; clipboard-write"></iframe>-->
    <!--    </el-dialog>-->
</div>
<script type="text/javascript">
    const githubUrl = 'https://github.com/login/oauth/authorize?scope=user:email&client_id=';
    const githubClientId = 'Iv23liwz6AxRv7VXcHvf'; // 上面App里的 Client ID
    const redirectUri = 'http://127.0.0.1:8999/demo/githubCallback.html';
    function doLogin() {
        location.href = githubUrl + encodeURIComponent(githubClientId)
            + '&redirect_uri=' + encodeURIComponent(redirectUri);
    }
</script>
</body>
</html>
